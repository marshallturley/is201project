<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle Game</title>

    <style>
        body {
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            background-color: #f5f5f570;
            padding: 40px;
            text-align: center;
        }

        #result {
            white-space: pre-line;
        }

        .letter {
            font-weight: bold;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 50px;
            height: 50px;
            margin: 4px;
            font-size: 26px;
        }

        .green {
            background-color: #6aaa64;
            color: white
        }

        .yellow {
            background-color: #c9b458;
            color: white
        }

        .gray {
            background-color: #787c7e;
            color: white
        }

        #winMessage {
            color: green;
            margin-bottom: 10px;
        }

        .guessRow {
            margin-bottom: 10px;
            margin-top: 10px;
        }

        .backButton {
            display: inline-block;
            padding: 10px 18px;
            background-color: #4caf50;
            color: white;
            text-decoration: none;
            font-size: 18px;
            margin-top: 20px;
        }

        .backButton:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <a class="backButton" href="index.html" target="_blank">Back to Scratch</a>

    <h1>Welcome to Wordle!</h1>
    <p>Guess the 5-letter word!</p>

    <input type="text" id="guessInput" maxlength="5" placeholder="Enter guess here" />
    <button onclick="submitGuess()">Submit</button>

    <div id="result"></div>
    <div id="winMessage"></div>

    <button id="playAgainBtn" style="display:none;" onclick="playAgain()">Play Again</button>


    <script>
        const words = ["APPLE","GRAPE","MANGO","BREAD","PLANT","WATER","STONE","OBESE","PHONE","METER","LIGHT","FINAL"]

        const secret = words[Math.floor(Math.random() * words.length)];
        console.log("Secret word:", secret);

        let guessesLeft = 6;

        function submitGuess() {
            const input = document.getElementById("guessInput");
            let guess = input.value.toUpperCase();
            const resultDiv = document.getElementById("result");

            if (guess.length !== 5) {
                alert("Guess must be exactly 5 letters!");
                return;
            }

            if (guessesLeft <= 0) return;

            guessesLeft--;

            let row = "";

            let secretFreq = {};
            for (let char of secret) {
                secretFreq[char] = (secretFreq[char] || 0) + 1;
            }

            let result = Array(5).fill("gray");
            for (let i = 0; i < 5; i++) {
                if (guess[i] === secret[i]) {
                    result[i] = "green";
                    secretFreq[guess[i]]--;
                }
            }

            for (let i = 0; i < 5; i++) {
                if(result[i] === "green") continue;

                if (secret.includes(guess[i]) && secretFreq[guess[i]] >0) {
                    result[i] = "yellow";
                    secretFreq[guess[i]]--;
                }
            }

            for (let i = 0; i < 5; i++) {
                row += `<span class="letter ${result[i]}">${guess[i]}</span>`;
            }

            resultDiv.innerHTML += `<div class="guessRow">${row}`;

            if (guess === secret) {
                document.getElementById("winMessage").innerText = "You got it!!!";
                document.getElementById("playAgainBtn").style.display = "inline-block";
            }

            if (guessesLeft === 0) {
                document.getElementById("winMessage").innerText = "Game Over! The word was: " + secret;
                document.getElementById("playAgainBtn").style.display = "inline-block";
            }

            input.value = "";
        }

        function playAgain() {
            location.reload();
        }
    </script>
</body>
</html>